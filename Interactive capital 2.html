<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Capital Explorer - Enhanced Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --cultural: #E85D04;
            --social: #219EBC;
            --symbolic: #9D4EDD;
            --emotional: #F72585;
            --economic: #06A77D;
            --digital: #4361EE;
            --cream: #FFF9F0;
            --dark: #1A1A1A;
            --grey: #6B7280;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #FFF9F0 0%, #FFE8CC 100%);
            padding: 20px;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: clamp(1rem, 2vw, 1.2rem);
            color: var(--grey);
            margin-bottom: 30px;
        }

        /* Progress Bar */
        .progress-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .progress-title {
            font-weight: 700;
            font-size: 1rem;
        }

        .progress-stats {
            font-size: 0.9rem;
            color: var(--grey);
            display: flex;
            gap: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .progress-bar-bg {
            background: #E5E7EB;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
        }



        /* Capital Cards Grid */
        .capital-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .capital-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: slideIn 0.5s ease-out forwards;
            animation-delay: calc(var(--index) * 0.1s);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .capital-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--accent-color);
        }

        .capital-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 32px rgba(0,0,0,0.15);
        }

        .capital-card.active {
            border: 3px solid var(--accent-color);
            transform: scale(1.05);
            box-shadow: 0 16px 48px rgba(0,0,0,0.2);
        }

        .capital-card.explored {
            background: linear-gradient(135deg, white 0%, rgba(0,0,0,0.02) 100%);
        }

        .capital-card.explored::after {
            content: '‚úì';
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background: var(--accent-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }

        .capital-card.cultural { --accent-color: var(--cultural); }
        .capital-card.social { --accent-color: var(--social); }
        .capital-card.symbolic { --accent-color: var(--symbolic); }
        .capital-card.emotional { --accent-color: var(--emotional); }
        .capital-card.economic { --accent-color: var(--economic); }
        .capital-card.digital { --accent-color: var(--digital); }

        .icon-container {
            width: 60px;
            height: 60px;
            background: var(--accent-color);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }

        .capital-card:hover .icon-container {
            transform: rotate(10deg) scale(1.1);
        }

        .icon {
            font-size: 32px;
        }

        .capital-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .capital-preview {
            font-size: 0.9rem;
            color: var(--grey);
            line-height: 1.5;
        }

        .explore-badge {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 12px;
            transition: transform 0.3s ease;
        }

        .capital-card:hover .explore-badge {
            transform: translateX(5px);
        }

        /* Detail Panel */
        .detail-panel {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            display: none;
            animation: fadeInUp 0.5s ease-out;
            margin-bottom: 30px;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .detail-panel.active {
            display: block;
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0,0,0,0.08);
        }

        .detail-icon {
            width: 80px;
            height: 80px;
            background: var(--accent-color);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            flex-shrink: 0;
        }

        .detail-title-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .detail-subtitle {
            font-size: 1.1rem;
            color: var(--grey);
        }

        .detail-content {
            margin-bottom: 30px;
        }

        .detail-section {
            margin-bottom: 25px;
        }

        .detail-section h3 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-section h3::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        .detail-section p {
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--grey);
        }

        /* Clickable Keywords */
        .key-elements {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .element-card {
            background: rgba(0,0,0,0.03);
            border-left: 4px solid var(--accent-color);
            padding: 15px;
            border-radius: 8px;
            font-size: 0.95rem;
            color: var(--grey);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .element-card:hover {
            transform: translateX(5px);
            background: var(--accent-color);
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .element-card::after {
            content: '‚Üí';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .element-card:hover::after {
            opacity: 1;
        }

        /* Keyword Popup */
        .keyword-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            backdrop-filter: blur(4px);
        }

        .keyword-popup.active {
            opacity: 1;
            visibility: visible;
        }

        .keyword-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 620px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.85) translateY(30px);
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 25px 60px rgba(0,0,0,0.3);
            border-top: 6px solid var(--accent-color);
        }

        .keyword-popup.active .keyword-content {
            transform: scale(1) translateY(0);
        }

        .keyword-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 36px;
            height: 36px;
            border: none;
            background: rgba(0,0,0,0.08);
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .keyword-close:hover {
            background: rgba(0,0,0,0.18);
            transform: rotate(90deg) scale(1.1);
        }

        .keyword-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .keyword-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 6px;
            padding-right: 40px;
        }

        .keyword-capital-tag {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 4px 12px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        .keyword-description {
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--grey);
            margin-bottom: 20px;
        }

        .keyword-example {
            background: linear-gradient(135deg, rgba(0,0,0,0.02), rgba(0,0,0,0.04));
            border-left: 4px solid var(--accent-color);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin-bottom: 20px;
        }

        .keyword-example-title {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .keyword-close-btn {
            display: block;
            width: 100%;
            padding: 14px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .keyword-close-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        /* Case Study Section */
        .case-study {
            background: linear-gradient(135deg, rgba(0,0,0,0.02), rgba(0,0,0,0.05));
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
        }

        .case-study-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .case-study-content {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--grey);
        }

        .case-study-highlight {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid var(--accent-color);
        }

        /* Quiz Section */
        .quiz-section {
            background: linear-gradient(135deg, rgba(0,0,0,0.02), rgba(0,0,0,0.05));
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
        }

        .quiz-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .quiz-question {
            font-size: 1rem;
            margin-bottom: 15px;
            color: var(--grey);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            background: white;
            border: 2px solid rgba(0,0,0,0.1);
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .quiz-option:hover {
            border-color: var(--accent-color);
            background: rgba(0,0,0,0.02);
            transform: translateX(5px);
        }

        .quiz-option.correct {
            border-color: #06A77D;
            background: rgba(6, 167, 125, 0.1);
        }

        .quiz-option.incorrect {
            border-color: #EF4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.95rem;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(6, 167, 125, 0.1);
            color: #06A77D;
            border-left: 4px solid #06A77D;
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: #EF4444;
            border-left: 4px solid #EF4444;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: white;
            color: var(--dark);
            border: 2px solid rgba(0,0,0,0.1);
        }

        .btn-secondary:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        /* Completion Badge */
        .completion-badge {
            background: linear-gradient(135deg, #06A77D, #059669);
            color: white;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            display: none;
            animation: bounceIn 0.8s ease-out;
            margin-bottom: 30px;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .completion-badge.show {
            display: block;
        }

        .completion-badge h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .completion-badge .badge-icon {
            font-size: 60px;
            margin-bottom: 15px;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .share-btn {
            padding: 10px 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        /* Progress bar shimmer */
        .progress-bar-fill {
            background: linear-gradient(90deg, #E85D04, #219EBC, #9D4EDD, #06A77D, #4361EE);
            height: 100%;
            width: 0%;
            transition: width 0.6s ease;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0; left: -100%; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 1.8s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 200%; }
        }

        /* Confetti */
        .confetti-piece {
            position: fixed;
            width: 10px;
            height: 12px;
            border-radius: 2px;
            pointer-events: none;
            z-index: 9999;
            animation: confettiFall linear forwards;
        }

        @keyframes confettiFall {
            0%   { transform: translateY(-20px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(105vh) rotate(540deg); opacity: 0; }
        }

        /* Card glow on hover */
        .capital-card.cultural:hover  { box-shadow: 0 16px 40px rgba(232,93,4,0.3); }
        .capital-card.social:hover    { box-shadow: 0 16px 40px rgba(33,158,188,0.3); }
        .capital-card.symbolic:hover  { box-shadow: 0 16px 40px rgba(157,78,221,0.3); }
        .capital-card.emotional:hover { box-shadow: 0 16px 40px rgba(247,37,133,0.3); }
        .capital-card.economic:hover  { box-shadow: 0 16px 40px rgba(6,167,125,0.3); }
        .capital-card.digital:hover   { box-shadow: 0 16px 40px rgba(67,97,238,0.3); }

        /* Responsive */
        @media (max-width: 768px) {
            .capital-grid {
                grid-template-columns: 1fr;
            }

            .detail-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                text-align: center;
            }

            .keyword-content {
                padding: 30px 20px;
            }

            .progress-stats {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Interactive Capital Explorer</h1>
            <p class="subtitle">Click on capitals to explore | Click keywords for deep dives | Complete quizzes to master concepts</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="progress-title">Your Learning Journey</div>
                <div class="progress-stats">
                    <div class="stat-item">
                        <span>üìñ</span>
                        <span id="explored-count">0</span>/6 Explored
                    </div>
                    <div class="stat-item">
                        <span>‚úÖ</span>
                        <span id="quiz-count">0</span>/6 Quizzes
                    </div>
                    <div class="stat-item">
                        <span>üîç</span>
                        <span id="keyword-count">0</span> Keywords Clicked
                    </div>
                </div>
            </div>
            <div class="progress-bar-bg">
                <div class="progress-bar-fill" id="progress-fill"></div>
            </div>
        </div>

        <!-- Completion Badge -->
        <div class="completion-badge" id="completion-badge">
            <div class="badge-icon">üèÜ</div>
            <h3>Congratulations, Overcomer!</h3>
            <p>You've explored all 6 forms of capital. You're ready to build your capital portfolio!</p>
            <div class="share-buttons">
                <button class="share-btn" onclick="shareProgress()">üì± Share Progress</button>
                <button class="share-btn" onclick="downloadCertificate()">üìú Get Certificate</button>
            </div>
        </div>

        <!-- Detail Panel -->
        <div class="detail-panel" id="detail-panel"></div>

        <!-- Keyword Popup -->
        <div class="keyword-popup" id="keyword-popup">
            <div class="keyword-content" id="keyword-content">
                <button class="keyword-close" onclick="closeKeywordPopup()">√ó</button>
                <div id="keyword-inner"></div>
            </div>
        </div>

        <!-- Capital Cards -->
        <div class="capital-grid">
            <div class="capital-card cultural" data-capital="cultural" style="--index: 0">
                <div class="icon-container">
                    <div class="icon">üìö</div>
                </div>
                <h3 class="capital-title">Cultural Capital</h3>
                <p class="capital-preview">Master the unwritten rules and speech codes of institutions</p>
                <span class="explore-badge">Explore ‚Üí</span>
            </div>

            <div class="capital-card social" data-capital="social" style="--index: 1">
                <div class="icon-container">
                    <div class="icon">ü§ù</div>
                </div>
                <h3 class="capital-title">Social Capital</h3>
                <p class="capital-preview">Build bridges to networks beyond your immediate circle</p>
                <span class="explore-badge">Explore ‚Üí</span>
            </div>

            <div class="capital-card symbolic" data-capital="symbolic" style="--index: 2">
                <div class="icon-container">
                    <div class="icon">üëë</div>
                </div>
                <h3 class="capital-title">Symbolic Capital</h3>
                <p class="capital-preview">Transform credentials into recognised authority</p>
                <span class="explore-badge">Explore ‚Üí</span>
            </div>

            <div class="capital-card emotional" data-capital="emotional" style="--index: 3">
                <div class="icon-container">
                    <div class="icon">üí™</div>
                </div>
                <h3 class="capital-title">Emotional Capital</h3>
                <p class="capital-preview">Build resilience to face systemic pressure</p>
                <span class="explore-badge">Explore ‚Üí</span>
            </div>

            <div class="capital-card economic" data-capital="economic" style="--index: 4">
                <div class="icon-container">
                    <div class="icon">üí∞</div>
                </div>
                <h3 class="capital-title">Economic Capital</h3>
                <p class="capital-preview">Create financial freedom to make ethical choices</p>
                <span class="explore-badge">Explore ‚Üí</span>
            </div>

            <div class="capital-card digital" data-capital="digital" style="--index: 5">
                <div class="icon-container">
                    <div class="icon">üåê</div>
                </div>
                <h3 class="capital-title">Digital Capital</h3>
                <p class="capital-preview">Use technology as your global passport</p>
                <span class="explore-badge">Explore ‚Üí</span>
            </div>
        </div>
    </div>

    <script>
        const capitalData = {
            cultural: {
                icon: 'üìö',
                title: 'Cultural Capital',
                subtitle: 'Master the Unwritten Rules',
                description: 'Cultural capital is your ability to navigate different institutional contexts with confidence and authenticity. It\'s about knowing the unwritten rules, understanding "speech codes," and recognising the hidden curriculum that governs success in various spaces.',
                keyElements: [
                    {
                        title: 'Understanding institutional habitus',
                        detail: 'Habitus is the deeply ingrained habits, skills, and dispositions that you develop through life experience. Institutional habitus refers to the specific cultural norms and expectations of schools, universities, and workplaces.',
                        example: 'Example: Knowing that in British universities, critical thinking means questioning sources (even your lecturer!), whereas in some cultures, this might be seen as disrespectful.'
                    },
                    {
                        title: 'Mastering elaborated speech codes',
                        detail: 'Elaborated code is formal, context-independent language used in professional settings. It contrasts with restricted code‚Äîinformal language used with people who share your background.',
                        example: 'Example: "I require clarification on the assessment criteria" (elaborated) vs. "What do you want for this essay?" (restricted)'
                    },
                    {
                        title: 'Navigating the hidden curriculum',
                        detail: 'The hidden curriculum includes all the unwritten social rules and cultural knowledge that schools expect but don\'t explicitly teach‚Äîlike how to email a teacher, network at university events, or dress for success.',
                        example: 'Example: Understanding that "office hours" at university means you can drop in to ask questions, not that the professor is just doing admin work.'
                    },
                    {
                        title: 'Code-switching with intentionality',
                        detail: 'Code-switching is the ability to alternate between different communication styles depending on context. Done intentionally, it\'s a superpower‚Äînot "selling out."',
                        example: 'Example: Speaking "roadman" slang with friends but switching to Standard English for your university interview, while staying authentically you.'
                    }
                ],
                realWorld: 'In practice, cultural capital means knowing when to use formal language in a job interview, understanding the unspoken dress codes of different professional environments, and being able to "read the room" in institutional settings.',
                caseStudy: {
                    title: 'üéì Real-World Case Study: Malala Yousafzai',
                    content: 'Malala used her cultural capital strategically. She understood Western media codes (speaking in clear sound bites, using emotionally resonant narratives) while maintaining her Pakistani identity. She code-switched between Pashto, Urdu, and English, and navigated both Taliban-controlled Pakistan and UN podiums. Her institutional habitus allowed her to attend Oxford while advocating for girls globally.',
                    lesson: 'Lesson: Cultural capital isn\'t about abandoning your identity‚Äîit\'s about being fluent in multiple cultural contexts.'
                },
                quiz: {
                    question: 'What is the most important aspect of cultural capital?',
                    options: [
                        'Understanding and navigating unwritten institutional rules',
                        'Having expensive tastes and preferences',
                        'Owning lots of books and art',
                        'Speaking multiple languages fluently'
                    ],
                    correct: 0,
                    feedback: {
                        correct: 'Excellent! Cultural capital is primarily about understanding and navigating the unwritten rules and codes that govern institutional spaces.',
                        incorrect: 'Not quite. Cultural capital is primarily about understanding and navigating the unwritten rules and codes that govern institutional spaces, not just having certain possessions or skills.'
                    }
                }
            },
            social: {
                icon: 'ü§ù',
                title: 'Social Capital',
                subtitle: 'Build Strategic Networks',
                description: 'Social capital refers to the strength and reach of your network. It\'s not just about who you know‚Äîit\'s about who knows you, and critically, who they know. The most valuable social capital comes from "weak ties" or bridges to different social circles.',
                keyElements: [
                    {
                        title: 'Building bonding capital (close ties)',
                        detail: 'Bonding capital is your inner circle‚Äîfamily, close friends, your community. These relationships provide emotional support, trust, and a sense of belonging.',
                        example: 'Example: Your football team, mosque/church community, or family WhatsApp group. These give you strength but usually the same information you already have.'
                    },
                    {
                        title: 'Leveraging bridging capital (weak ties)',
                        detail: 'Bridging capital connects you to people outside your immediate circle‚Äîacquaintances, former colleagues, that person you met at a careers fair. These "weak ties" are actually your strongest asset for social mobility.',
                        example: 'Example: That cousin who works in tech might introduce you to their manager. Your friend\'s older sister who went to Cambridge can tell you the application tricks.'
                    },
                    {
                        title: 'Strategic relationship cultivation',
                        detail: 'Building relationships isn\'t transactional or fake‚Äîit\'s about genuine connection with purpose. Show interest, add value, follow up, and maintain contact even when you don\'t need anything.',
                        example: 'Example: Following up with a guest speaker after a school talk, commenting thoughtfully on their LinkedIn posts, then asking for a 15-minute informational chat six months later.'
                    },
                    {
                        title: 'Access to diverse networks',
                        detail: 'The most powerful networks cross different social groups‚Äîdifferent ages, industries, economic backgrounds, and cultural communities. Diversity in your network equals diversity in opportunities.',
                        example: 'Example: Joining a coding club (tech industry access), volunteering at a charity (nonprofit sector), and playing in a band (creative industries) gives you three different networks.'
                    }
                ],
                realWorld: 'Social capital is what allows you to get that informational interview, hear about opportunities before they\'re publicly advertised, or get an introduction to someone who can open doors for you.',
                caseStudy: {
                    title: 'üéì Real-World Case Study: Stormzy\'s #Merky Foundation',
                    content: 'Stormzy leveraged his social capital (connections in music, media, and among Black British youth) to create bridging capital for others. The #Merky Books deal with Penguin gave new authors access to publishing networks they couldn\'t reach alone. His Cambridge scholarship programme connects Black students with mentors, alumni networks, and opportunities they might not have found independently.',
                    lesson: 'Lesson: Once you build social capital, you can use it to create bridges for your community‚Äînot just yourself.'
                },
                quiz: {
                    question: 'Why are "weak ties" often more valuable than close friends for social mobility?',
                    options: [
                        'Because they require less emotional investment',
                        'Because you can trust them more',
                        'Because they are easier to maintain',
                        'Because they connect you to different networks and information'
                    ],
                    correct: 3,
                    feedback: {
                        correct: 'Spot on! Weak ties are valuable because they bridge you to different social circles, providing access to new information and opportunities your close circle doesn\'t have.',
                        incorrect: 'Actually, weak ties are most valuable because they bridge you to different social circles, providing access to new information and opportunities your close circle doesn\'t have.'
                    }
                }
            },
            symbolic: {
                icon: 'üëë',
                title: 'Symbolic Capital',
                subtitle: 'Claim Your Authority',
                description: 'Symbolic capital is the prestige, titles, and credentials that make institutions and individuals recognise your authority. It\'s about transforming your lived experience and actual expertise into forms that systems validate and respect.',
                keyElements: [
                    {
                        title: 'Formal qualifications and degrees',
                        detail: 'Degrees, A-levels, vocational qualifications‚Äîthese are the "passports" that open doors. But remember: the institution name matters almost as much as the qualification itself in the UK system.',
                        example: 'Example: An Economics degree from Cambridge opens more doors than the same degree from a less prestigious university, even though the actual knowledge might be similar.'
                    },
                    {
                        title: 'Professional titles and certifications',
                        detail: 'Professional credentials (ACCA, CIPD, etc.), job titles, and industry recognition all add to your symbolic capital. They\'re social proof that you\'ve met certain standards.',
                        example: 'Example: "Student" vs. "A-Level Student" vs. "Head Girl/Boy" vs. "Regional Youth Parliament Member"‚Äîeach title adds a layer of legitimacy.'
                    },
                    {
                        title: 'Translating lived experience into credentials',
                        detail: 'You may have massive expertise from life experience that institutions don\'t recognise. The trick is learning to "translate" it into language systems understand and value.',
                        example: 'Example: "I looked after my younger siblings" becomes "Extensive experience in childcare, multitasking, and time management under pressure" on a CV.'
                    },
                    {
                        title: 'Institutional recognition and legitimacy',
                        detail: 'Awards, published work, media mentions, references from respected figures‚Äîall these signal to institutions that you\'re worth paying attention to. It\'s social proof at scale.',
                        example: 'Example: Winning a Diana Award, being featured in a local newspaper for community work, or getting a reference from your MP all add symbolic capital.'
                    }
                ],
                realWorld: 'Symbolic capital is why the same advice carries more weight when it comes from someone with "Dr." before their name, or why a formal job title can change how people respond to your emails.',
                caseStudy: {
                    title: 'üéì Real-World Case Study: Marcus Rashford MBE',
                    content: 'Marcus Rashford strategically built symbolic capital beyond football. His MBE, honorary doctorate from University of Manchester, appointments to government poverty taskforces, and published children\'s books all added layers of legitimacy. When he campaigned for free school meals, he wasn\'t just "a footballer with an opinion"‚Äîhe was Dr. Rashford MBE, a published author, and a government advisor. His symbolic capital made politicians listen.',
                    lesson: 'Lesson: Stack your credentials strategically. Each one adds weight to your voice in different spaces.'
                },
                quiz: {
                    question: 'What is "epistemological violence" in relation to symbolic capital?',
                    options: [
                        'When systems ignore your knowledge because you lack formal credentials',
                        'Physical violence in educational settings',
                        'Violence caused by too much studying',
                        'Disagreements between different schools of thought'
                    ],
                    correct: 0,
                    feedback: {
                        correct: 'Exactly right! Epistemological violence occurs when institutions dismiss or devalue your knowledge and expertise simply because you don\'t have the "right" formal credentials.',
                        incorrect: 'Not quite. Epistemological violence occurs when institutions dismiss or devalue your knowledge and expertise simply because you don\'t have the "right" formal credentials.'
                    }
                }
            },
            emotional: {
                icon: 'üí™',
                title: 'Emotional Capital',
                subtitle: 'Build Your Resilience',
                description: 'Emotional capital is your internal reservoir of resilience and self-regulation. It\'s your ability to maintain composure under systemic pressure, manage triggers, and widen the gap between a stimulus and your response‚Äîespecially when facing institutional giants.',
                keyElements: [
                    {
                        title: 'Self-regulation and emotional control',
                        detail: 'This is your ability to manage your emotions in high-stakes situations‚Äîexams, interviews, confrontations with authority. It doesn\'t mean suppressing feelings; it means choosing your response.',
                        example: 'Example: When a teacher makes a microaggressive comment, you can choose to respond strategically (report it later, address it calmly) rather than reacting in the heat of the moment and making things worse for yourself.'
                    },
                    {
                        title: 'Resilience in challenging situations',
                        detail: 'Resilience is the ability to bounce back from setbacks‚Äîfailed exams, rejected uni applications, friendship breakdowns. It\'s built through small acts of recovery, not by avoiding difficulty.',
                        example: 'Example: After bombing your mock exams, resilience means analysing what went wrong, adjusting your study plan, and trying again‚Äînot giving up or pretending it doesn\'t matter.'
                    },
                    {
                        title: 'The two-minute pause technique',
                        detail: 'Viktor Frankl said: "Between stimulus and response there is a space. In that space is our power to choose." The two-minute pause is about creating that space before you respond to triggers.',
                        example: 'Example: When you get a university rejection letter, wait two minutes (or two hours) before responding emotionally. That pause lets you process and respond strategically rather than spiral.'
                    },
                    {
                        title: 'Managing triggers and responses',
                        detail: 'Triggers are situations that provoke strong emotional reactions‚Äîusually linked to past experiences. Identifying your triggers and preparing coping strategies is key to emotional capital.',
                        example: 'Example: If being told "you\'re not good enough" triggers shame from childhood, recognise that trigger and prepare a reframe: "This is one person\'s opinion in one moment, not my worth."'
                    }
                ],
                realWorld: 'Emotional capital is what allows you to stay calm and strategic when facing a microaggression in a meeting, or to recover quickly from a setback without losing your long-term vision.',
                caseStudy: {
                    title: 'üéì Real-World Case Study: Dina Asher-Smith',
                    content: 'Dina Asher-Smith built emotional capital through repeated high-pressure situations (Olympics, World Championships). She studied History at King\'s College London while training, developing the self-regulation needed to balance elite sport and academics. After injuries and setbacks, she demonstrated resilience by returning stronger. Her emotional capital‚Äîstaying composed under pressure, managing disappointment, maintaining focus‚Äîis as crucial to her success as her physical ability.',
                    lesson: 'Lesson: Emotional capital isn\'t about never feeling stress or pain‚Äîit\'s about developing tools to manage them and keep moving towards your goals.'
                },
                quiz: {
                    question: 'What is the "two-minute pause" technique?',
                    options: [
                        'Taking a two-minute break every hour',
                        'Widening the gap between a trigger and your response to maintain composure',
                        'Meditating for two minutes daily',
                        'Pausing to count to 120 when angry'
                    ],
                    correct: 1,
                    feedback: {
                        correct: 'Perfect! The two-minute pause is about creating space between a triggering event and your response, giving you time to choose a strategic reaction rather than an emotional one.',
                        incorrect: 'Actually, the two-minute pause is about creating space between a triggering event and your response, giving you time to choose a strategic reaction rather than an emotional one.'
                    }
                }
            },
            economic: {
                icon: 'üí∞',
                title: 'Economic Capital',
                subtitle: 'Build Your Firewall',
                description: 'Economic capital is your financial resources and assets. More than just money, it\'s your "firewall"‚Äîthe cushion that gives you the power to say "no" to toxic situations, make ethical choices, and invest in your own development without desperation.',
                keyElements: [
                    {
                        title: 'Financial independence and security',
                        detail: 'This isn\'t about being rich‚Äîit\'s about having enough financial buffer to make choices freely. Even small emergency funds (3 months\' expenses) dramatically increase your power.',
                        example: 'Example: Having ¬£500 saved means you can quit a toxic part-time job and find a better one, rather than staying somewhere that damages your mental health because you desperately need the money.'
                    },
                    {
                        title: 'Resource ownership and assets',
                        detail: 'Owning assets (a laptop, a car, qualifications, investments) gives you independence and options. As a student, your most valuable asset is your education‚Äîbut coding skills, a portfolio, or even a YouTube channel are assets too.',
                        example: 'Example: Owning a decent laptop means you can do freelance graphic design work from home. Not having one means you\'re limited to jobs you can do without tech.'
                    },
                    {
                        title: 'Strategic budget optimisation',
                        detail: 'Economic capital isn\'t just about earning‚Äîit\'s about smart spending. Understanding where your money goes, eliminating waste, and investing in things that build other capitals (courses, networking events, professional clothes).',
                        example: 'Example: Spending ¬£100 on a professional photoshoot for LinkedIn might feel expensive, but it\'s an investment in symbolic capital that could lead to better opportunities.'
                    },
                    {
                        title: 'Freedom to make ethical choices',
                        detail: 'When you have economic security, you can afford to stand by your values‚Äîturn down unethical jobs, support causes you believe in, take unpaid internships that build experience, or pursue less lucrative but more meaningful careers.',
                        example: 'Example: With savings, you can afford to take that 3-month unpaid internship at the UN that could launch your international development career, rather than needing to work at McDonald\'s all summer.'
                    }
                ],
                realWorld: 'Economic capital means being able to leave a toxic job because you have savings, or being able to invest in a professional development course that will pay dividends later.',
                caseStudy: {
                    title: 'üéì Real-World Case Study: Akala (Rapper & Activist)',
                    content: 'Akala built economic capital through music, then used it to fund The Hip-hop Shakespeare Company‚Äîan educational initiative that doesn\'t generate profit but builds cultural capital for inner-city youth. His economic firewall allowed him to turn down corporate partnerships that conflicted with his values and pursue meaningful work (books, documentaries, speaking) that might pay less but aligned with his mission. Economic capital gave him the freedom to be selectively strategic.',
                    lesson: 'Lesson: Economic capital isn\'t the end goal‚Äîit\'s the firewall that protects you while you pursue your real goals.'
                },
                quiz: {
                    question: 'Why is economic capital described as a "firewall"?',
                    options: [
                        'Because it protects your computer from viruses',
                        'Because it gives you the freedom to say no to toxic situations',
                        'Because it prevents people from stealing from you',
                        'Because it makes you immune to economic downturns'
                    ],
                    correct: 1,
                    feedback: {
                        correct: 'Exactly! Economic capital is your firewall because it provides the financial cushion that gives you the power to refuse toxic situations and make choices aligned with your values.',
                        incorrect: 'Actually, economic capital is your firewall because it provides the financial cushion that gives you the power to refuse toxic situations and make choices aligned with your values.'
                    }
                }
            },
            digital: {
                icon: 'üåê',
                title: 'Digital Capital',
                subtitle: 'Your Global Passport',
                description: 'Digital capital is your ability to leverage technology for influence, automation, and reach. It\'s your "passport" that allows you to bypass local gatekeepers, build a global audience, and scale your impact beyond geographic constraints.',
                keyElements: [
                    {
                        title: 'Digital literacy and technical skills',
                        detail: 'This goes beyond just "using social media." It\'s about understanding how platforms work, basic coding, data analysis, content creation, SEO, and how to make technology work for you rather than just consuming it.',
                        example: 'Example: Learning basic Python or HTML opens up freelance opportunities on Fiverr. Understanding Instagram\'s algorithm lets you grow a platform for your poetry, art, or activism.'
                    },
                    {
                        title: 'Online presence and reputation',
                        detail: 'Your digital footprint is now part of your CV. Universities and employers Google you. A strong LinkedIn, professional Twitter, or portfolio website can differentiate you from hundreds of other candidates.',
                        example: 'Example: Having a well-curated LinkedIn with recommendations, projects, and thought leadership posts makes you visible to recruiters globally‚Äînot just your school careers advisor.'
                    },
                    {
                        title: 'Automation and efficiency tools',
                        detail: 'Using tech to automate repetitive tasks (scheduling posts, managing emails, tracking assignments) frees up your time for strategic work. Working smarter, not just harder.',
                        example: 'Example: Using Notion to organise all your coursework, deadlines, and uni applications in one place saves hours of admin time that you can spend actually writing your personal statement.'
                    },
                    {
                        title: 'Global reach and accessibility',
                        detail: 'Digital capital means you\'re not limited by geography. You can learn from MIT professors on YouTube, network with professionals in New York on LinkedIn, or sell your art to customers in Tokyo on Etsy.',
                        example: 'Example: A Black British student from Peckham can learn coding from Harvard\'s free CS50 course, build a portfolio on GitHub, and get hired by a Silicon Valley company‚Äîall without leaving London.'
                    }
                ],
                realWorld: 'Digital capital is what allows a teacher in London to build a course platform reaching students worldwide, or enables someone to automate administrative tasks to free up time for strategic work.',
                caseStudy: {
                    title: 'üéì Real-World Case Study: Amika George (FreePeriods Founder)',
                    content: 'Amika George, while still in sixth form, used digital capital to launch the #FreePeriods campaign against period poverty. She leveraged Instagram, Twitter, and online petitions to build a movement of 200,000+ supporters globally. Her digital presence attracted mainstream media coverage and forced government policy change. She bypassed traditional gatekeepers (you usually need decades of experience to influence policy) by using digital platforms to amplify marginalised voices directly.',
                    lesson: 'Lesson: Digital capital is the ultimate democratiser‚Äîit lets you punch above your weight and reach audiences that would be impossible through traditional routes.'
                },
                quiz: {
                    question: 'What makes digital capital a "passport"?',
                    options: [
                        'It helps you travel internationally',
                        'It allows you to bypass local gatekeepers and reach global audiences',
                        'It gets you through airport security faster',
                        'It proves your identity online'
                    ],
                    correct: 1,
                    feedback: {
                        correct: 'Brilliant! Digital capital is a passport because it enables you to transcend local limitations, bypass traditional gatekeepers, and access global opportunities and audiences.',
                        incorrect: 'Not quite. Digital capital is a passport because it enables you to transcend local limitations, bypass traditional gatekeepers, and access global opportunities and audiences.'
                    }
                }
            }
        };

        // Keyword definitions database
        const keywordDefinitions = capitalData;

        let exploredCapitals = new Set();
        let quizzesCompleted = new Set();
        let keywordsClicked = 0;
        const cards = document.querySelectorAll('.capital-card');
        const detailPanel = document.getElementById('detail-panel');
        const progressFill = document.getElementById('progress-fill');
        const exploredCount = document.getElementById('explored-count');
        const quizCount = document.getElementById('quiz-count');
        const keywordCount = document.getElementById('keyword-count');
        const completionBadge = document.getElementById('completion-badge');
        const keywordPopup = document.getElementById('keyword-popup');
        const keywordInner = document.getElementById('keyword-inner');

        cards.forEach(card => {
            card.addEventListener('click', () => {
                const capitalType = card.dataset.capital;
                showDetail(capitalType);
                
                if (!exploredCapitals.has(capitalType)) {
                    exploredCapitals.add(capitalType);
                    card.classList.add('explored');
                    updateProgress();
                    sparkOnCard(card);
                }

                cards.forEach(c => c.classList.remove('active'));
                card.classList.add('active');

                detailPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        function showDetail(capitalType) {
            const data = capitalData[capitalType];
            const colorVar = `var(--${capitalType})`;

            detailPanel.style.setProperty('--accent-color', colorVar);
            
            detailPanel.innerHTML = `
                <div class="detail-header">
                    <div class="detail-icon">${data.icon}</div>
                    <div class="detail-title-section">
                        <h2>${data.title}</h2>
                        <p class="detail-subtitle">${data.subtitle}</p>
                    </div>
                </div>

                <div class="detail-content">
                    <div class="detail-section">
                        <h3>What is ${data.title}?</h3>
                        <p>${data.description}</p>
                    </div>

                    <div class="detail-section">
                        <h3>Key Elements</h3>
                        <p style="font-size:0.9rem; color: var(--grey); margin-bottom: 12px;">üëÜ <strong>Click any element below</strong> to get a deep-dive explanation with real-world examples.</p>
                        <div class="key-elements">
                            ${data.keyElements.map((element, index) => `
                                <div class="element-card" data-keyword="${index}" data-capital="${capitalType}">
                                    ${element.title}
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Real-World Application</h3>
                        <p>${data.realWorld}</p>
                    </div>
                </div>

                <div class="case-study">
                    <div class="case-study-title">
                        ${data.caseStudy.title}
                    </div>
                    <div class="case-study-content">
                        ${data.caseStudy.content}
                    </div>
                    <div class="case-study-highlight">
                        <strong>üí° ${data.caseStudy.lesson}</strong>
                    </div>
                </div>

                <div class="quiz-section">
                    <div class="quiz-title">üéØ Test Your Understanding</div>
                    <div class="quiz-question">${data.quiz.question}</div>
                    <div class="quiz-options" id="quiz-options-${capitalType}">
                        ${data.quiz.options.map((option, index) => `
                            <div class="quiz-option" data-index="${index}" data-capital="${capitalType}">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" id="quiz-feedback-${capitalType}"></div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="closeDetail()">‚Üê Back to Overview</button>
                    <button class="btn btn-primary" onclick="nextCapital('${capitalType}')">Next Capital ‚Üí</button>
                </div>
            `;

            detailPanel.classList.add('active');

            // Add quiz interactivity
            const quizOptions = detailPanel.querySelectorAll('.quiz-option');
            quizOptions.forEach(option => {
                option.addEventListener('click', () => handleQuizAnswer(option, data.quiz, capitalType));
            });

            // Add keyword click handlers
            const keywordCards = detailPanel.querySelectorAll('.element-card');
            keywordCards.forEach(card => {
                card.addEventListener('click', (e) => {
                    const el = e.target.closest('.element-card');
                    if (!el) return;
                    const keywordIndex = parseInt(el.dataset.keyword);
                    const capital = el.dataset.capital;
                    showKeywordPopup(capital, keywordIndex);
                });
            });
        }

        function showKeywordPopup(capitalType, keywordIndex) {
            const data = capitalData[capitalType].keyElements[keywordIndex];
            const capitalInfo = capitalData[capitalType];
            const colorVar = `var(--${capitalType})`;
            
            keywordsClicked++;
            updateProgress();

            keywordPopup.style.setProperty('--accent-color', colorVar);

            keywordInner.innerHTML = `
                <span class="keyword-icon">${capitalInfo.icon}</span>
                <div class="keyword-capital-tag">${capitalInfo.title}</div>
                <h2 class="keyword-title">${data.title}</h2>
                <p class="keyword-description">${data.detail}</p>
                <div class="keyword-example">
                    <div class="keyword-example-title">üí° Real-World Example</div>
                    <p style="color: var(--grey); line-height: 1.7; font-size: 0.95rem;">${data.example}</p>
                </div>
                <button class="keyword-close-btn" onclick="closeKeywordPopup()">Got it! Close ‚úì</button>
            `;

            keywordPopup.classList.add('active');
        }

        function closeKeywordPopup() {
            keywordPopup.classList.remove('active');
        }

        // Close popup when clicking outside
        keywordPopup.addEventListener('click', (e) => {
            if (e.target === keywordPopup) {
                closeKeywordPopup();
            }
        });

        function handleQuizAnswer(option, quiz, capitalType) {
            const capital = option.dataset.capital;
            const selectedIndex = parseInt(option.dataset.index);
            const feedback = document.getElementById(`quiz-feedback-${capital}`);
            const allOptions = document.querySelectorAll(`#quiz-options-${capital} .quiz-option`);

            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });

            if (selectedIndex === quiz.correct) {
                option.classList.add('correct');
                feedback.textContent = '‚úì ' + quiz.feedback.correct;
                feedback.classList.add('correct');
                
                // Mark quiz as completed
                if (!quizzesCompleted.has(capitalType)) {
                    quizzesCompleted.add(capitalType);
                    updateProgress();
                }
            } else {
                option.classList.add('incorrect');
                allOptions[quiz.correct].classList.add('correct');
                feedback.textContent = '‚úó ' + quiz.feedback.incorrect;
                feedback.classList.add('incorrect');
            }

            feedback.classList.add('show');
        }

        function closeDetail() {
            detailPanel.classList.remove('active');
            cards.forEach(c => c.classList.remove('active'));
        }

        function nextCapital(currentCapital) {
            const capitalOrder = ['cultural', 'social', 'symbolic', 'emotional', 'economic', 'digital'];
            const currentIndex = capitalOrder.indexOf(currentCapital);
            const nextIndex = (currentIndex + 1) % capitalOrder.length;
            const nextCapitalType = capitalOrder[nextIndex];

            const nextCard = document.querySelector(`.capital-card[data-capital="${nextCapitalType}"]`);
            nextCard.click();
        }

        function updateProgress() {
            const totalProgress = ((exploredCapitals.size + quizzesCompleted.size + (keywordsClicked / 4)) / 13) * 100;
            progressFill.style.width = Math.min(totalProgress, 100) + '%';
            exploredCount.textContent = exploredCapitals.size;
            quizCount.textContent = quizzesCompleted.size;
            keywordCount.textContent = keywordsClicked;

            if (exploredCapitals.size === 6 && quizzesCompleted.size === 6) {
                setTimeout(() => {
                    completionBadge.classList.add('show');
                    completionBadge.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    triggerConfetti();
                    setTimeout(triggerConfetti, 1500);
                }, 500);
            }
        }

        function shareProgress() {
            const text = `I just mastered all 6 Forms of Capital! üèÜ Explored ${exploredCapitals.size}/6 capitals, completed ${quizzesCompleted.size}/6 quizzes, and clicked ${keywordsClicked} keywords to deepen my understanding. Ready to overcome giants! #CapitalExplorer #Overcomer`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'My Capital Explorer Progress',
                    text: text
                });
            } else {
                navigator.clipboard.writeText(text);
                alert('Progress copied to clipboard! Share it on social media.');
            }
        }

        function downloadCertificate() {
            alert('Certificate feature coming soon! For now, take a screenshot of your completion badge to celebrate your achievement! üéâ');
        }

        function triggerConfetti() {
            const colors = ['#E85D04','#219EBC','#9D4EDD','#F72585','#06A77D','#4361EE','#FFD700','#FF6B6B'];
            for (let i = 0; i < 80; i++) {
                setTimeout(() => {
                    const el = document.createElement('div');
                    el.className = 'confetti-piece';
                    el.style.cssText = `
                        left: ${Math.random() * 100}%;
                        top: -20px;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        width: ${6 + Math.random() * 8}px;
                        height: ${8 + Math.random() * 10}px;
                        animation-duration: ${2 + Math.random() * 2}s;
                        animation-delay: ${Math.random() * 0.5}s;
                        border-radius: ${Math.random() > 0.5 ? '50%' : '2px'};
                    `;
                    document.body.appendChild(el);
                    setTimeout(() => el.remove(), 4000);
                }, i * 20);
            }
        }

        function sparkOnCard(card) {
            const rect = card.getBoundingClientRect();
            for (let i = 0; i < 8; i++) {
                const spark = document.createElement('div');
                spark.style.cssText = `
                    position: fixed;
                    width: 6px; height: 6px;
                    border-radius: 50%;
                    background: ${card.style.getPropertyValue('--accent-color') || '#E85D04'};
                    left: ${rect.left + rect.width/2}px;
                    top: ${rect.top + rect.height/2}px;
                    pointer-events: none;
                    z-index: 999;
                    transition: all 0.5s ease;
                    opacity: 1;
                `;
                document.body.appendChild(spark);
                const angle = (i / 8) * Math.PI * 2;
                const dist = 30 + Math.random() * 40;
                requestAnimationFrame(() => {
                    spark.style.transform = `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px)`;
                    spark.style.opacity = '0';
                });
                setTimeout(() => spark.remove(), 600);
            }
        }

    </script>
</body>
</html>